# Система автономного мониторинга и ремонта дорожного полотна.
## Команда проекта:

**Швецова Юлия Игоревна** - наставник 

**Шерстобитов Олег Андреевич** -  программист 

**Ржанникова Елена Андреевна** - программист



## Цель проекта:
Создание системы, которая позволит осуществлять мониторинг состояния дорожного полотна с помощью квадрокоптера и проводить ремонт обнаруженных дефектов автономным ровером.
## Задачи проекта:
- Разработка алгоритма для квадрокоптера, который позволит ему автономно облетать городские улицы и обнаруживать ямы и дефекты дорожного полотна при помощи нейронной сети.
- Создание сервера, который будет составлять карту повреждений на основе данных, полученных от квадрокоптера.
- Проектирование автономного ровера, который сможет передвигаться по заранее составленному маршруту, соблюдая ПДД, распознавая показания светофоров и т. д.
- Разработка системы сканирования ям при помощи лидара и определение их размера и объёма для принятия решения о самостоятельном ремонте или передачи информации о необходимости ручного устранения.
- Создание механизма подачи необходимого объёма асфальтобетонной смеси в яму и последующего выравнивания поверхности.
- Тестирование системы на реальных дорогах для оценки её эффективности и выявления возможных проблем.
- Доработка системы на основе результатов тестирования.
- Внедрение системы в эксплуатацию.
  
## Требования к системе:
- Квадрокоптер должен быть способен автономно выполнять облет городских улиц и обнаруживать дефекты дорожного полотна.
- Сервер должен составлять карту повреждений на основе данных, полученных от квадрокоптера.
- Автономный ровер должен передвигаться по заранее составленному маршруту, соблюдать ПДД и распознавать показания светофоров.
- Ровер должен иметь систему сканирования ям при помощи лидара.
- Система должна принимать решение о самостоятельном ремонте либо же передаче информации о том, что эту яму необходимо устранять вручную.
- В случае пригодности ямы для автономного ремонта система должна подавать необходимый объем асфальтобетонной смеси и выравнивать поверхность.
## Ожидаемые результаты:
- Создание эффективной системы мониторинга и ремонта дорожного полотна, которая поможет улучшить качество дорог и снизить затраты на их обслуживание.
- Сокращение времени на обнаружение и устранение дефектов дорожного полотна.
- Повышение безопасности дорожного движения за счёт улучшения качества дорог.
## Описание работы квадрокоптера и ровера:
Квадрокоптер автономно выполняет облет городских улиц и при помощи нейронной сети обнаруживает ямы и дефекты дорожного полотна. Все данные о найденных дефектах отправляются на сервер, который составляет карту повреждений. По ночам, когда автомобилей на дорогах меньше, автономный ровер выезжает на ремонт дороги. Он передвигается по заранее составленному маршруту, соблюдая ПДД, распознавая показания светофоров и прочее. По прибытии на место работ ровер при помощи лидара сканирует яму, определяет ее размер и объем. На основе полученных данных он принимает решение о самостоятельном ремонте либо же передаче информации о том, что эту яму необходимо устранять вручную. Если яма пригодна для автономного ремонта, он подает необходимый объем асфальтобетонной смеси в яму, а затем проезжается по ней, выравнивая ее.


## Реализация программного обеспечения в рамках проекта:
Для того,чтобы проверять, как работает квадрокоптер с загружнной в него программой,мы создали  карту с имитацией дорожного полотна
![b120f259-0b71-494c-8f30-c828f7c72deb](https://github.com/user-attachments/assets/68eca9f4-c178-47d2-af95-b5983d7c2133)

На карте мы разместили фотографии ям. После чего запустили квадрокоптер с программой,которая зависала над ямами и фотографировала , отправляя их на компьютер, используя код:
```python
from std_srvs.srv import Trigger
from sensor_msgs.msg import Image
from cv_bridge import CvBridge
import cv2
import rospy

rospy.init_node('flight')

i = 0

while True:
	i = i + 1
	frame = rospy.wait_for_message('/main_camera/image_raw', Image)
	img = CvBridge().imgmsg_to_cv2(frame, 'bgr8')
	cv2.imwrite(f'data_img_{i}.jpg', img)
	print(f'Sucessful saved img {i}')
	rospy.sleep(0.5)
```

Сделав около 300 фотографий ям,мы загрузили их на сайт [roboflow](
https://app.roboflow.com/login), чтобы обработать и обучить нейронную сеть распозновать ямы.
![yami](image.png)


Импортируем все необходимые библиотеки
```python
import rospy
from clover import srv
from std_srvs.srv import Trigger
from clover.srv import SetLEDEffect
import math
```

Добавляем необходимые ноды и прокси
```python
rospy.init_node('flight')

get_telemetry = rospy.ServiceProxy('get_telemetry', srv.GetTelemetry)
navigate = rospy.ServiceProxy('navigate', srv.Navigate)
navigate_global = rospy.ServiceProxy('navigate_global', srv.NavigateGlobal)
land = rospy.ServiceProxy('land', Trigger)
```
